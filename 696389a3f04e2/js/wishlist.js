class WishlistProduct extends HTMLElement{constructor(){super(),this.addEventListener("click",this.onAddWishlist),this.LOCAL_STORAGE_WISHLIST_KEY="shopify-wishlist",this.LOCAL_STORAGE_DELIMITER=",",this.BUTTON_ACTIVE_CLASS="active",this.onAddActiveClass(),this.WishlistItemCounter()}WishlistItemCounter(){let WISHLIST_ITEM_COUNT=document.querySelectorAll(".wishlist__count"),wishlist_item_length2=this.getWishlist().length;WISHLIST_ITEM_COUNT&&WISHLIST_ITEM_COUNT.forEach(singleItem=>{singleItem.innerText=wishlist_item_length2})}onAddActiveClass(){const wishlistAddedButton=this.querySelector("button");if(wishlistAddedButton!=null){let productHandle=wishlistAddedButton.dataset.productHandle||!1;if(!productHandle)return console.error("[Wishlist] Missing `data-product-handle` attribute. Failed to update the wishlist.");this.wishlistContains(productHandle)&&wishlistAddedButton.classList.add(this.BUTTON_ACTIVE_CLASS)}}onAddWishlist(){const wishlistItem=this.querySelector("button");let productHandle=wishlistItem.dataset.productHandle||!1;if(!productHandle)return console.error("[Wishlist] Missing `data-product-handle` attribute. Failed to update the wishlist.");this.updateWishlist(productHandle),this.WishlistItemCounter();let grid=document.querySelector("[grid-wishlist]")||!1;grid?this.closest(".product__card").remove():(wishlistItem.classList.add("loading","adding"),setTimeout(function(){wishlistItem.classList.remove("loading"),wishlistItem.classList.toggle("active")},500),setTimeout(function(){document.querySelector(".adding").classList.remove("adding")},1e3)),wishlist_item_length<=0&&grid.parentElement.classList.remove("wishlist_exists")}getWishlist(){let wishlist=localStorage.getItem(this.LOCAL_STORAGE_WISHLIST_KEY)||!1;return wishlist?wishlist.split(this.LOCAL_STORAGE_DELIMITER):[]}setWishlist(array){let wishlist=array.join(this.LOCAL_STORAGE_DELIMITER);return array.length?localStorage.setItem(this.LOCAL_STORAGE_WISHLIST_KEY,wishlist):localStorage.removeItem(this.LOCAL_STORAGE_WISHLIST_KEY),wishlist}updateWishlist(handle){let wishlist=this.getWishlist(),indexInWishlist=wishlist.indexOf(handle);return indexInWishlist===-1?wishlist.push(handle):wishlist.splice(indexInWishlist,1),this.setWishlist(wishlist)}wishlistContains(handle){return this.getWishlist().indexOf(handle)!==-1}}customElements.define("wishlist-item",WishlistProduct);let newWishlistObj=new WishlistProduct;document.addEventListener("DOMContentLoaded",function(){let grid=document.querySelector("[grid-wishlist]")||!1;grid&&setupGrid(grid)});var setupGrid=function(grid){var wishlist=newWishlistObj.getWishlist(),wihslitExistBtn=document.querySelector(".wishlist-page");wishlist.length>0&&(wihslitExistBtn.classList="wishlist_exists");var requests=wishlist.map(function(handle){var productTileTemplateUrl="/products/"+handle+"?view=wishlist";return fetch(productTileTemplateUrl).then(function(res){if(res.status==200)return res.text()})});Promise.all(requests).then(function(responses){var wishlistProductCards=responses.join("");grid.innerHTML=wishlistProductCards;var buttons=grid.querySelectorAll("wishlist-item")||[]})};
//# sourceMappingURL=/cdn/shop/t/4/assets/wishlist.js.map?v=28820418371611671351710100719
