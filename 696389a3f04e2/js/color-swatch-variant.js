customElements.get("variant-swatch-buttons")||customElements.define("variant-swatch-buttons",class extends HTMLElement{constructor(){super(),this.onColorSwatches()}onColorSwatches(){const variantList=this.getVariantData()||[],swatchButtonList=this.querySelectorAll("color-swatch-variant"),result=Object.values(variantList.reduce((total,item)=>{let k=`${item[this.dataset.colorSwatch]}`;return total[k]?total[k].count+=1:total[k]={...item,count:1},total},{}));swatchButtonList.length>0&&swatchButtonList.forEach(button=>{result.forEach(data=>{if(data[this.dataset.colorSwatch]===button.dataset.value)if(this.dataset.colorSwatchStyle==="image"&&data.featured_image!=null){const attributes={style:`--swatch-background-image: url(${data.featured_image.src}); --swatch-background-color: ${data[this.dataset.colorSwatch]};`,"data-variant-id":`${data.id}`};for(var key in attributes)button.setAttribute(key,attributes[key])}else{const attributes={style:`--swatch-background-color: ${data[this.dataset.colorSwatch]};`,"data-variant-id":`${data.id}`};for(var key in attributes)button.setAttribute(key,attributes[key])}})})}getVariantData(){return this.variantData=this.variantData||JSON.parse(this.querySelector('[type="application/json"]').textContent),this.variantData}}),customElements.get("color-swatch-variant")||customElements.define("color-swatch-variant",class extends HTMLElement{constructor(){super(),this.variantId=this.dataset.variantId,this.productHandle=this.dataset.productHandle,this.productCard=this.closest(".product__card"),this.addEventListener("click",this.onClickHandler.bind(this))}onClickHandler(event){let url=`/products/${this.productHandle}?variant=${this.variantId}&view=colorswatch`;fetch(url).then(response=>response.text()).then(responseText=>{const html=new DOMParser().parseFromString(responseText,"text/html");this.updateThumbnail(html),this.updateTitle(html),this.updatePrice(html)}).catch(e=>{console.error(e)}),this.productCard.querySelectorAll(".product--color-swatch").forEach(button=>{button.classList.remove("checked-color")}),this.classList.add("checked-color")}updateThumbnail(html){const destination=this.productCard.querySelector(".media").firstChild,source=html.querySelector(".media").firstChild;source&&destination&&(destination.src=source.src,destination.srcset=source.srcset);const linkDestination=this.productCard.querySelector(".product__card--link"),linkSource=html.querySelector(".product__card--link").getAttribute("href");linkDestination&&linkSource&&linkDestination.setAttribute("href",`${linkSource}`)}updateTitle(html){const destination=this.productCard.querySelector(".product-grid-item__title"),source=html.querySelector(".product-grid-item__title");source&&destination&&(destination.innerHTML=source.innerHTML)}updatePrice(html){const destination=this.productCard.querySelector(".price"),source=html.querySelector(".price");source&&destination&&(destination.innerHTML=source.innerHTML)}});
//# sourceMappingURL=/cdn/shop/t/4/assets/color-swatch-variant.js.map?v=99418182171209263911710100719
